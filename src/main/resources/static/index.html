<!DOCTYPE html>
<html lang="en">
<head>
    <link href="/css/stylesheet.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Noto+Serif+KR|Open+Sans" rel="stylesheet">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!--<link href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />-->
    <!--<script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js">-->

    <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">-->


    <!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>-->
    <!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>-->

    <!--&lt;!&ndash;<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">&ndash;&gt;-->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
    </script>
    <script>

    function getData() {
            console.log("getting airplane data...");

            // Get the data from endpoint.
            $.ajax({
                url:"/api/airplanes/",
                type:"get",
                success: function(airplanes) {
                    // On successful get, reload the datatable with new data.
                    console.log("This is the data: " + airplanes);
                    $('#table').DataTable().clear();
                    $('#table').DataTable().rows.add(airplanes);
                    $('#table').DataTable().columns.adjust().draw();
                }
            });
        }

    function postData() {
            console.log("posting a new airplane...");

            //Get values from html
            var identification = $("#inputPlaneIdentification").val();
            var speed = $("#inputCruiseSpeed").val();
            var kerosene = $("#inputAmountOfKerosene").val();
            var flying = $("#inputIsFlying").val();

            // Create JS object with data.
            var newAirplane = {
                planeIdentification : identification,
                cruisingSpeed : speed,
                amountOfKerosene : kerosene,
                isCurrentlyFlying: flying
            };
            console.log(newAirplane);

            // Convert JS object to JSON.
            var validJsonAirplane = JSON.stringify(newAirplane);
            console.log(validJsonAirplane);

            // Post JSON to endpoint.
            $.ajax({
                url:"api/airplanes/",
                type:"post",
                data: validJsonAirplane,
                contentType: "application/json",
                success: function(result) {
                    // On successful post, reload data to get the added one as well.
                    console.log("success post data!");
                    getData();
                }
            });
        }

        function putData() {
            console.log("changing...");

            //Get values from html
            var identification = $("#inputChangePlaneIdentification").val();
            var speed = $("#inputChangeCruiseSpeed").val();
            var kerosene = $("#inputChangeAmountOfKerosene").val();
            var flying = $("#inputChangeIsFlying").val();
            var id = $("#inputChangeId").val();

            // Create JS object with data.
            var changeAirplane = {
                planeIdentification : identification,
                cruisingSpeed : speed,
                amountOfKerosene : kerosene,
                isCurrentlyFlying: flying
            };
            console.log(changeAirplane);

            // Convert JS object to JSON.
            var validJsonAirplane = JSON.stringify(changeAirplane);
            console.log(validJsonAirplane);

            var src = "api/airplanes/" + id;

            // Post JSON to endpoint.
            $.ajax({
                url: src,
                type:"put",
                data: validJsonAirplane,
                contentType: "application/json",
                success: function(result) {
                    // On successful post, reload data to get the added one as well.
                    console.log("success put data!");
                    getData();
                }
            });
        }

            function deleteData() {
            console.log("deleting...");

            //Get values from html
            var id = $("#inputDeleteId").val();

            // Create JS object with data.
            var deleteAirplane = {
                id : id
            };
            console.log(deleteAirplane);

            // Convert JS object to JSON.
            var validJsonAirplane = JSON.stringify(deleteAirplane);
            console.log(validJsonAirplane);
            console.log("Delete airplane" + id);


            var src = "api/airplanes/" + id;

            // Post JSON to endpoint.
            $.ajax({
                url: src,
                type:"delete",
                data: validJsonAirplane,
                contentType: "application/json",
                success: function(result) {
                    // On successful post, reload data to get the added one as well.
                    console.log("success delete data!");
                    getData();
                }
            });
        }

        $(document).ready(function(){

                $("#newAirplaneForm").on('submit', function(e) {
                console.log("Submitted new airplane form");

                // Post the data from the modal.
                postData();

                // Reset modal hide and to no values.

                $('#newAirplaneModal').modal('hide');

                $("#inputPlaneIdentification").val("");
                $("#inputCruiseSpeed").val("");
                $("#inputAmountOfKerosene").val("");
                $("#inputIsFlying").val("");
            });

            $("#changeAirplaneForm").on('submit', function(e) {
                console.log("Submitted changed airplane form");

                // Put the data from the modal.
                putData();

                // Reset modal to no values.

                $("#inputChangePlaneIdentification").val("");
                $("#inputChangeCruiseSpeed").val("");
                $("#inputChangeAmountOfKerosene").val("");
                $("#inputChangeIsFlying").val("");
                $("#inputChangeId").val("");
            });

                $("#deleteAirplaneForm").on('submit', function(e) {
                console.log("Submitted delete airplane form");

                // Delete the data.
                deleteData();

                // Reset modal to no values.

                $("#inputDeleteId").val("");
            });

                $('#table').DataTable({
                columns: [
                    { "data": "id" },
                    { "data": "planeIdentification" },
                    { "data": "cruiseSpeed" },
                    { "data": "amountOfKerosene" },
                    { "data": "currentlyFlying" }
                ]
            });
            // Load first data.
            getData();
            $("#btn5").click(function(){
                $('#table tbody').empty();
                console.log("hiding data..");
                });
            $("#btn6").click(function(){
            getData();
            });
            });
    </script>

    <meta charset="UTF-8">
    <title>Airplanes</title>
</head>
<body>

<div>


                <h1>Airplanes</h1>


                <p>Here you can find info about the airplanes of this airport</p>


                <div id="cats"></div><br>
                <br>
                <h2>Airplanes table</h2>
                <table id="table">
                    <thead>
                    <tr>
                        <td>Id</td>
                        <td>Plane identification</td>
                        <td>Cruise speed</td>
                        <td>Amount of kerosene</td>
                        <td>is flying</td>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>

                <button id="btn5">Hide data</button>
                <button id="btn6">Show data</button>

                <br>
                <br>

    <div class=“row”>
        <div class=“col-md-12”>
            <button type="button" data-toggle="modal" data-target="#newAirplaneModal">New Airplane</button>
        </div>
    </div>
    <div class=“row”>
        <div class=“col-md-12”>
            <button type="button" data-toggle="modal" data-target="#changeAirplaneModal">Edit Airplane</button>
        </div>
    </div>
    <div class=“row”>
        <div class=“col-md-12”>
            <button type="button" data-toggle="modal" data-target="#deleteAirplaneModal">Delete Airplane</button>
        </div>
    </div>

    <!-- New Airplane Modal -->
    <div id="newAirplaneModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title">New Airplane</h2>
                </div>

                <div class="modal-body">

                <form data-toggle="validator" role="form" id="newAirplaneForm" onsubmit="return false;">
                    <div class="form-group">
                        <label for="inputPlaneIdentification" class="control-label">Plane identification</label>
                        <input type="text" class="form-control" id="inputPlaneIdentification" placeholder="Enter plane identification" required>
                    </div>

                    <div class="form-group">
                        <label for="inputCruiseSpeed" class="control-label">Cruise speed</label>
                        <input type="text" class="form-control" id="inputCruiseSpeed" placeholder="Enter cruise speed" required>
                    </div>

                    <div class="form-group">
                        <label for="inputAmountOfKerosene" class="control-label">Amount of kerosene</label>
                        <input type="text" class="form-control" id="inputAmountOfKerosene" placeholder="Enter the amount of kerosene" required>
                    </div>

                    <div class="form-group">
                        <label for="inputIsFlying" class="control-label">Flying</label>
                        <input type="text" class="form-control" id="inputIsFlying" placeholder="Enter whether the plane is flying" required>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Submit</button>
                        <button id="closeButton1" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>

                </form>
                </div>
            </div>

        </div>
    </div>
    <!-- End of new Airplane Modal -->


    <!-- Change Airplane Modal -->
    <div id="changeAirplaneModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>

                <h2>Change airplane</h2>

                </div>

                <div class="modal-body">

                <form data-toggle="validator" role="form" id="changeAirplaneForm" onsubmit="return false;">

                    <div class="form-group">
                        <label for="inputChangeId" class="control-label">Id of plane</label>
                        <input type="text" class="form-control" id="inputChangeId" placeholder="Enter the id" required>
                    </div>

                    <div class="form-group">
                        <label for="inputChangePlaneIdentification" class="control-label">Plane identification</label>
                        <input type="text" class="form-control" id="inputChangePlaneIdentification" placeholder="Enter a plane identification" required>
                    </div>

                    <div class="form-group">
                        <label for="inputChangeCruiseSpeed" class="control-label">Cruise speed</label>
                        <input type="text" class="form-control" id="inputChangeCruiseSpeed" placeholder="Enter the cruise speed" required>
                    </div>

                    <div class="form-group">
                        <label for="inputChangeAmountOfKerosene" class="control-label">Amount of kerosene</label>
                        <input type="text" class="form-control" id="inputChangeAmountOfKerosene" placeholder="Enter the amount of kerosene" required>
                    </div>

                    <div class="form-group">
                        <label for="inputChangeIsFlying" class="control-label">Is flying</label>
                        <input type="text" class="form-control" id="inputChangeIsFlying" placeholder="Is the plane flying?" required>
                    </div>


                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Submit</button>
                        <button id="closeButton2" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>

                </form>
                </div>
            </div>

        </div>
    </div>
    <!-- End of change Airplane Modal -->
    <!-- New Airplane Modal -->
    <div id="deleteAirplaneModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title">Delete Airplane</h2>
                </div>

                <div class="modal-body">
                <form data-toggle="validator" role="form" id="deleteAirplaneForm" onsubmit="return false;">

                    <div class="form-group">
                        <label for="inputDeleteId" class="control-label">Id of airplane</label>
                        <input type="text" class="form-control" id="inputDeleteId" placeholder="Enter the id" required>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Submit</button>
                        <button id="closeButton3" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>


                </form>

</div>
</div>

</div>
</div>
<!-- End of change Airplane Modal -->


</div>

</body>
</html>